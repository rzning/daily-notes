# VuePress Theme

- <https://vuepress.vuejs.org/zh/theme/>

## ğŸ¨ ä½¿ç”¨ä¸»é¢˜

å¯ä»¥åœ¨ `.vuepress/config.js` é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä½ éœ€è¦ä½¿ç”¨çš„ä¸»é¢˜ï¼š

```js
module.exports = {
  theme: 'vuepress-theme-xxx'
}
```

è‹¥ä½¿ç”¨çš„ä¸»é¢˜ä»¥ `vuepress-theme-` å¼€å¤´ï¼Œåˆ™å¯ä»¥çœç•¥æ­¤å‰ç¼€ï¼š

```js
module.exports = {
  theme: 'xxx', // vuepress-theme-xxx
  theme: '@org/xxx' // @org/vuepress-theme-xxx
}
```

Markdown æ–‡ä»¶æ¸²æŸ“çš„å†…å®¹ï¼Œåœ¨ä¸»é¢˜å¸ƒå±€ç»„ä»¶ä¸­ä½¿ç”¨ `<Content/>` å…¨å±€ç»„ä»¶æ¥å‘ˆç°ã€‚

```xml
<!-- .vuepress/theme/Layout.vue -->
<template>
  <div class="theme-container">
    <Content/>
  </div>
</template>
```

å†…å®¹æ‘˜æŠ„ï¼š

- å¯ä»¥åœ¨ Markdown æ–‡ä»¶å†…å®¹ä¸­æ·»åŠ  `<!-- more -->` æ³¨é‡Šè¡Œï¼Œ
  åœ¨æ­¤æ³¨é‡Šä¹‹å‰çš„å†…å®¹å°†ä½œä¸ºæ–‡ç« çš„æ‘˜è¦è¢«æŠ½å–ã€‚
- åœ¨å¸ƒå±€ç»„ä»¶ä¸­å¯é€šè¿‡ `$page.excerpt` å±æ€§è·å–æ–‡æ¡£æ‘˜è¦å†…å®¹ã€‚

è‹¥æƒ³è¿›ä¸€æ­¥å®šåˆ¶åŒ–ä¸»é¢˜ï¼Œåªæœ‰ä¸€ä¸ª `.vuepress/theme/Layout.vue` å¸ƒå±€æ–‡ä»¶æ˜¾å¾—è¿‡äºå•è–„ï¼Œ
ä½ å¯èƒ½æƒ³è®©ä¸åŒçš„é¡µé¢æœ‰ä¸åŒçš„å¸ƒå±€ï¼Œ
æˆ–è‡ªå®šä¹‰è°ƒè‰²æ¿ `.vuepress/styles/palette.styl` æ–‡ä»¶ï¼Œç”šè‡³åº”ç”¨ä¸€äº›æ’ä»¶ã€‚

æ­¤æ—¶ä½ å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ç¤¾åŒºå·²ç»å¼€å‘å¥½çš„ä¸»é¢˜åŒ…ï¼Œæˆ–è€…è‡ªå·±ä¸°è¡£è¶³é£Ÿå¼€å‘è‡ªå·±çš„ä¸»é¢˜ã€‚

## ğŸ­å¼€å‘ä¸»é¢˜

ä¸»é¢˜å¯ä»¥æ”¾åœ¨å½“å‰é¡¹ç›®çš„ `./vuepress/theme/` ç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå•ç‹¬çš„ NPM åŒ…è¿›è¡Œå¼€å‘ã€‚

æ— è®ºåœ¨å“ªä¸ªä½ç½®ç»„ç»‡ä½ çš„ä¸»é¢˜ï¼Œé¦–å…ˆéœ€è¦ç†Ÿæ‚‰ä»¥ä¸‹çº¦å®šçš„ä¸»é¢˜ç›®å½•ç»“æ„ï¼š

### ğŸ“š ç›®å½•ç»“æ„

- `theme/`
  - `global-compnents/` - æ­¤ç›®å½•çš„ Vue ç»„ä»¶å°†è‡ªåŠ¨æ³¨å†Œä¸ºå…¨å±€ç»„ä»¶
  - `components/` - Vue ç»„ä»¶ç›®å½•
  - `layouts/`- å¸ƒå±€ç»„ä»¶ç›®å½•
    - `Layout.vue` - å¿…é¡»ï¼Œä¸»å¸ƒå±€ç»„ä»¶
    - `404.vue`
  - `styles/` - æ ·å¼ç›®å½•
    - `index.styl` - å…¨å±€æ ·å¼
    - `palette.styl` - è°ƒè‰²æ¿ï¼Œå®šä¹‰å˜é‡
  - `templates/` - è¦†ç›–é»˜è®¤çš„æ¨¡æ¿æ–‡ä»¶
    - `dev.html`
    - `ssr.html`
  - `index.js` - ä¸»é¢˜å…¥å£æ–‡ä»¶
  - `enhanceApp.js` - ä¸»é¢˜å±‚é¢çš„åº”ç”¨å¢å¼ºæ–‡ä»¶
  - `package.json`

è‹¥ä¸»é¢˜ä»¥ NPM åŒ…å‘å¸ƒï¼Œä¸”æ²¡æœ‰å…¥å£ `themePath/index.js` ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œ
åªéœ€æŒ‡å®šåŒ…çš„ä¸»æ–‡ä»¶ä¸º `layouts/Layout.vue` å³å¯ã€‚

```json
// package.json
{
  "main": "layouts/Layout.vue"
}
```

### ğŸ’  å¸ƒå±€ç»„ä»¶

è‹¥ä½ çš„ä¸»é¢˜åŒ…å«ä»¥ä¸‹å¸ƒå±€ç»„ä»¶ï¼š

- `theme/layouts/`
  - `Layout.vue`
  - `Home.vue`
  - `About.vue`
  - `404.vue`

åˆ™æ‰€æœ‰é¡µé¢å°†é»˜è®¤ä½¿ç”¨ `Layout.vue` å¸ƒå±€ç»„ä»¶ï¼Œæ²¡åŒ¹é…çš„è·¯ç”±å°†ä½¿ç”¨ `404.vue` å¸ƒå±€é¡µé¢ã€‚

è‹¥æƒ³ä½¿ç”¨å…¶ä»–å¸ƒå±€ç»„ä»¶ï¼Œåªéœ€åœ¨å½“å‰é¡µé¢æºæ–‡ä»¶ä¸­æ·»åŠ  `layout` é…ç½®ä¿¡æ¯æŒ‡å®šå³å¯ã€‚

ä¸‹ä¾‹ä¸­å°†ä½¿ç”¨ `Home.vue` ä½œä¸ºå…¶å¸ƒå±€ç»„ä»¶ï¼š

```yaml
---
layout: Home
---
```

### ğŸ§© ä½¿ç”¨æ’ä»¶

å¯ä»¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ `themePath/index.js` ä¸­ç»™ä¸»é¢˜æ·»åŠ ä¸€äº›æ’ä»¶ï¼š

```js
module.exports = {
  plugins: [
    [
      '@vuepress/pwa',
      { 
        serviceWorker: true,
        updatePopup: true
      }
    ]
  ]
}
```

### ğŸ”® ä½¿ç”¨å…ƒæ•°æ®

å¸ƒå±€ç»„ä»¶å°†ä¼šå¯¹æ¯ä¸ªé¡µé¢å†…å®¹çš„æºæ–‡ä»¶æ‰§è¡Œä¸€æ¬¡ï¼Œ
å¹¶ä¼šå°†ç½‘ç«™åŠå½“å‰é¡µé¢çš„å…ƒæ•°æ®ä»¥ `$site` å’Œ `$page` å±æ€§æ³¨å…¥åˆ°å¸ƒå±€ç»„ä»¶ä¸­ã€‚

- `$site.tile`, `$site.description` å’Œ `$site.base`
  - æ•°æ®æ¥è‡ªäº `.vuepress/config.js` é…ç½®æ–‡ä»¶ä¸­çš„å¯¹åº”å­—æ®µã€‚
- `$site.pages`
  - ä»¥æ•°ç»„å½¢å¼åˆ—å‡ºäº†æ‰€æœ‰é¡µé¢çš„å…ƒæ•°æ®
  - æ¯ä¸ªé¡µé¢åŒ…æ‹¬å…¶è·¯å¾„ã€é¡µé¢æ ‡é¢˜ï¼ŒåŠ Front Matter æ•°æ®
- `$page`
  - ä¸ºå½“å‰é¡µé¢çš„å…ƒæ•°æ®ï¼ŒåŒæ ·åœ¨ `$site.pages` é‡Œä¹Ÿæœ‰ä¸€ä¸ªå¤‡ä»½
- `$page.lastUpdaed`
  - ä¸ºå½“å‰é¡µé¢æºæ–‡ä»¶æœ€å Git æäº¤çš„ UNIX æ—¶é—´æˆ³
- `$site.themeConfig`
  - ä¸ºé…ç½®æ–‡ä»¶ `.vuepress/config.js` ä¸­ `themeConfig` å­—æ®µçš„å€¼
  - å¯ä»¥é€šè¿‡è¯»å–æ­¤å±æ€§çš„å€¼æ¥è·å–æ­¤ä¸»é¢˜å¯¹ç”¨æˆ·å¼€æ”¾çš„è‡ªå®šä¹‰é…ç½®

### ğŸ­ åº”ç”¨çº§é…ç½®

å¯ä»¥åˆ›å»º `themePath/enhanceApp.js` æ–‡ä»¶æ¥å¯¹ VuePress åº”ç”¨è¿›è¡Œæ‰©å±•é…ç½®ã€‚

å¯ä»¥é€šè¿‡æ­¤é’©å­æ¥ç»™åº”ç”¨å®‰è£…ä¸€äº›é™„åŠ çš„ Vue æ’ä»¶ã€æ³¨å†Œå…¨å±€ç»„ä»¶ã€å¢åŠ é¢å¤–çš„è·¯ç”±é’©å­ç­‰ã€‚

```js
/**
 * @param {Object} data - é’©å­å‡½æ•°çš„ä¼ å‚
 * @param {Vue} data.Vue - å½“å‰ VuePress æ­£åœ¨ä½¿ç”¨çš„ Vue æ„é€ å‡½æ•°
 * @param {Object} data.options - é™„åŠ åˆ°æ ¹å®ä¾‹çš„ä¸€äº›é€‰é¡¹
 * @param {Router} data.router - å½“å‰åº”ç”¨çš„è·¯ç”±å®ä¾‹
 * @param {Object} data.siteData - ç«™ç‚¹å…ƒæ•°æ®
 */
export default (data) =>{
  const { Vue, options, router, siteData } = data
  // ...
}
```
