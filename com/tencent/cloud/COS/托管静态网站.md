# 托管静态网站

- [托管静态网站 - 对象存储 - 腾讯云](https://cloud.tencent.com/document/product/436/9512)

在此实践中，用户可以在腾讯云对象存储（以下简称 COS）上托管静态网站，
访客可以通过自定义域名（例如 `www.example.com` ）访问托管的静态网站。

步骤预览：

1. 注册域名与备案
2. 创建 Bucket 并上传内容
3. 绑定自定义域名
4. 开通 COS 的静态网站功能
5. 测试验证

---

## 事前准备

在本次实践中将会用到的相关服务：

#### 域名注册
- 访问网站需要注册一个域名，并进行备案

#### COS
- 使用对象存储创建存储桶，配置权限允许每个人查看内容，然后上传相应页面内容

#### CDN
- 内容分发网络和云解析服务奖共同作用，使域名和网站内容绑定，同时为静态网站加速，降低访问延时，提高可用性

#### 云解析
- 利用云解析，可将域名和网站内容绑定在一起，实现使用自定义域名访问静态网站的目的

## 一、注册域名与备案

域名注册是在互联网上建立任何服务的基础。注册域名之后，还需要进行备案，网站才能正常访问。

- 已注册域名并备案，可跳过本步骤。
- 已注册域名但未备案，请进行 [域名备案](https://cloud.tencent.com/product/ba)。
- 未注册域名，请先 [注册域名](https://dnspod.cloud.tencent.com/)，再进行域名备案。

## 二、创建存储桶并上传内容

### 2.1 创建存储桶

使用腾讯云账号登录 [COS 控制台]，为你的网站创建相应的存储桶。

存储桶在 COS 中用于存储数据，您可以将网站内容存储在一个存储桶中。

可通过 COS 概览页或 Bucket 列表快速创建存储桶，详细设置可参考 [创建存储桶]。

1. 单击【创建 Bucket】弹出创建 Bucket 对话框。
2. 填写存储桶名称，选择存储桶所属地域，单击【确定】创建存储桶。

### 2.2 配置存储桶并上传内容

1. 将存储桶的访问权限设置为 `公有读私有写` 使网站内容可被公开访问。
2. 将你的网站内容上传到已创建好的存储桶。

> 开启静态网站功能后，当用户访问任何不带文件指向的一级目录时，
> COS 默认优先匹配对应存储桶目录下 index.html，其次为 index.htm，若无此文件，则返回 404。

## 三、绑定自定义域名

> 用户只有绑定自定义域名并开启静态网站功能后，才可以直接在浏览器中打开资源。

### 3.1 域名添加

- 通过 CDN 控制台添加
- 通过 COS 控制台添加

如果您想在添加自定义域名的同时，进行 CDN 高级管理和配置，可优先选择 CDN 控制台添加域名。

如果您只需要先添加自定义域名，不进行其他配置，COS 控制台添加将节省时间。

#### 通过 CDN 控制台添加

1. 登录 [CDN 控制台] 进入域名管理页面。
2. 单击【添加域名】进入域名配置界面。
3. 输入域名，【源站类型】选择 `对象存储（COS）`，【源站】选择托管网站内容的存储桶默认域名。
4. 【业务类型】选择 `静态加速`，其他保持默认配置，提交即可。
5. 等待域名配置下发至全网节点（约15分钟）。
6. 获取系统分配的 CNAME 记录。

#### 通过 COS 控制台添加

1. 登录 [COS 控制台] 进入 Bucket 列表页面，选择存储网站内容的存储桶。
2. 单击【域名管理】进入域名管理页面。
3. 单击【添加域名】按钮，进入可配置状态。
4. 输入待绑定的自定义域名，选择开启 CDN 加速，单击【保存】即可完成添加。
5. 等待域名上线，获取对应的 CNAME 记录。

### 3.2 域名解析

添加自定义域名后，还需进行域名解析。

1. 登录 [域名管理控制台] 进入我的域名页面。
2. 单击【添加解析】弹出添加域名对话框。
3. 输入自定义域名，选择所属项目，单击【确定】保存即可。
4. 域名添加成功后，单击域名进入解析记录管理页面。
5. 单击【添加记录】弹出添加记录对话框。
6. 记录类型选择 `CNAME`，主机记录留空，线路类型选择默认。
7. 记录值填写上步获取的 CNAME 记录，TTL 保持默认，单击【确定】保持即可。
8. 完成解析添加后，等待大约 15 分钟生效。

## 四、设置静态网站托管

将网站内容与自定义域名绑定之后，需要开启 COS 的静态网站功能，才能通过浏览器直接访问网站内容。

1. 登录 [COS 控制台] 选择【Bucket 列表】界面，单击相应存储桶。
2. 单击【基础配置】找到静态网站设置，单击【编辑】按钮。
3. 修改当前状态为开启，开启 Index 索引。
4. 开启指定的 HTTP 状态码并配置指定文件（可选），单击【保存】即可。

> 静态网站设置的具体配置及相关参数说明，请参考 [静态网站设置](https://cloud.tencent.com/document/product/436/6249)。

## 五、测试验证

在完成上述步骤后，可通过在浏览器地址栏输入网站域名进行访问。

在某些情况下，您可能需要清除缓存才能看到预期结果。

[COS 控制台]: <https://console.cloud.tencent.com/cos>
[创建存储桶]: <https://cloud.tencent.com/document/product/436/6232>
[CDN 控制台]: <https://console.cloud.tencent.com/cdn>
[域名管理控制台]: <https://console.cloud.tencent.com/domain>
